{"version":3,"sources":["../src/utils.js"],"names":["getChangedProps","cleanPath","isObject","isComplexObject","isSerializable","ensurePath","throwError","isDeveloping","delay","forceSerializable","getProviders","dependencyMatch","getWithPath","ensureStrictPath","createResolver","createDummyController","getStateTreeProp","propsA","propsB","propsAKeys","Object","keys","propsBKeys","changedProps","i","length","push","path","replace","obj","Array","isArray","value","additionalTypes","validType","reduce","currentValid","type","undefined","prototype","toString","call","constructor","getPrototypeOf","split","message","Error","process","env","NODE_ENV","func","wait","args","context","later","apply","setTimeout","name","defineProperty","e","module","provider","concat","modules","nestedProviders","moduleKey","extractAllChildMatches","children","matches","key","changes","dependencyMap","currentMatches","changeIndex","currentDependencyMapLevel","pathKeyIndex","dependency","forceChildPathUpdates","currentValue","index","indexOf","getters","isTag","arg","types","isType","isCompute","overrideProps","getValue","assign","props","getPath","noop","state","signals","getState","currentState","pathKey","options","on","model","get","getSignal","signal","componentDependencyStore","addEntity","prop","isFrozen"],"mappings":"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","file":"utils.js","sourcesContent":["import Tag from './tags/Tag'\nimport { Compute } from './Compute'\n\nexport function getChangedProps(propsA = {}, propsB = {}) {\n  const propsAKeys = Object.keys(propsA)\n  const propsBKeys = Object.keys(propsB)\n  const changedProps = []\n\n  for (let i = 0; i < propsAKeys.length; i++) {\n    if (propsA[propsAKeys[i]] !== propsB[propsAKeys[i]]) {\n      changedProps.push({ path: [propsAKeys[i]] })\n    }\n  }\n\n  for (let i = 0; i < propsBKeys.length; i++) {\n    if (propsA[propsBKeys[i]] !== propsB[propsBKeys[i]]) {\n      changedProps.push({ path: [propsBKeys[i]] })\n    }\n  }\n\n  return changedProps\n}\n\nexport function cleanPath(path) {\n  return typeof path === 'string' ? path.replace(/\\.\\*\\*|\\.\\*/, '') : path\n}\n\nexport function isObject(obj) {\n  return typeof obj === 'object' && obj !== null && !Array.isArray(obj)\n}\n\nexport function isComplexObject(obj) {\n  return typeof obj === 'object' && obj !== null\n}\n\nexport function isSerializable(value, additionalTypes = []) {\n  const validType = additionalTypes.reduce((currentValid, type) => {\n    if (currentValid || value instanceof type) {\n      return true\n    }\n\n    return currentValid\n  }, false)\n\n  if (\n    value !== undefined &&\n    (validType ||\n      (isObject(value) &&\n        Object.prototype.toString.call(value) === '[object Object]' &&\n        (value.constructor === Object ||\n          Object.getPrototypeOf(value) === null)) ||\n      typeof value === 'number' ||\n      typeof value === 'string' ||\n      typeof value === 'boolean' ||\n      value === null ||\n      Array.isArray(value))\n  ) {\n    return true\n  }\n  return false\n}\n\nexport function ensurePath(path = []) {\n  if (Array.isArray(path)) {\n    return path\n  } else if (typeof path === 'string') {\n    return path.split('.')\n  }\n\n  return []\n}\n\nexport function throwError(message) {\n  throw new Error(`Cerebral - ${message}`)\n}\n\nexport function isDeveloping() {\n  return process.env.NODE_ENV !== 'production'\n}\n\nexport function delay(func, wait) {\n  return function(...args) {\n    const context = this\n    const later = () => {\n      func.apply(context, args)\n    }\n\n    setTimeout(later, wait)\n  }\n}\n\nexport function forceSerializable(value) {\n  if (value && !isSerializable(value)) {\n    const name = value.constructor.name\n\n    try {\n      Object.defineProperty(value, 'toJSON', {\n        value() {\n          return `[${name}]`\n        },\n      })\n    } catch (e) {}\n  }\n\n  return value\n}\n\nexport function getProviders(module) {\n  return (module.provider ? [module.provider] : []).concat(\n    Object.keys(module.modules || {}).reduce((nestedProviders, moduleKey) => {\n      return nestedProviders.concat(getProviders(module.modules[moduleKey]))\n    }, [])\n  )\n}\n\nfunction extractAllChildMatches(children) {\n  return Object.keys(children).reduce((matches, key) => {\n    if (children[key].children) {\n      return matches\n        .concat(children[key])\n        .concat(extractAllChildMatches(children[key].children))\n    }\n\n    return matches.concat(children[key])\n  }, [])\n}\n\nexport function dependencyMatch(changes, dependencyMap) {\n  let currentMatches = []\n\n  for (let changeIndex = 0; changeIndex < changes.length; changeIndex++) {\n    let currentDependencyMapLevel = dependencyMap\n    for (\n      let pathKeyIndex = 0;\n      pathKeyIndex < changes[changeIndex].path.length;\n      pathKeyIndex++\n    ) {\n      if (!currentDependencyMapLevel) {\n        break\n      }\n\n      if (currentDependencyMapLevel['**']) {\n        currentMatches.push(currentDependencyMapLevel['**'])\n      }\n\n      if (pathKeyIndex === changes[changeIndex].path.length - 1) {\n        const dependency =\n          currentDependencyMapLevel[changes[changeIndex].path[pathKeyIndex]]\n        if (dependency) {\n          currentMatches.push(dependency)\n\n          if (dependency.children) {\n            if (changes[changeIndex].forceChildPathUpdates) {\n              currentMatches = currentMatches.concat(\n                extractAllChildMatches(dependency.children)\n              )\n            } else {\n              if (dependency.children['**']) {\n                currentMatches.push(dependency.children['**'])\n              }\n\n              if (dependency.children['*']) {\n                currentMatches.push(dependency.children['*'])\n              }\n            }\n          }\n        }\n\n        if (currentDependencyMapLevel['*']) {\n          currentMatches.push(currentDependencyMapLevel['*'])\n        }\n      }\n\n      if (!currentDependencyMapLevel[changes[changeIndex].path[pathKeyIndex]]) {\n        currentDependencyMapLevel = null\n        break\n      }\n\n      currentDependencyMapLevel =\n        currentDependencyMapLevel[changes[changeIndex].path[pathKeyIndex]]\n          .children\n    }\n  }\n\n  return currentMatches\n}\n\nexport function getWithPath(obj) {\n  return path => {\n    return path.split('.').reduce((currentValue, key, index) => {\n      if (index > 0 && currentValue === undefined) {\n        throwError(\n          `You are extracting with path \"${path}\", but it is not valid for this object`\n        )\n      }\n\n      return currentValue[key]\n    }, obj)\n  }\n}\n\nexport function ensureStrictPath(path, value) {\n  if (isComplexObject(value) && path.indexOf('*') === -1) {\n    return `${path}.**`\n  }\n\n  return path\n}\n\nexport function createResolver(getters) {\n  return {\n    isTag(arg, ...types) {\n      if (!(arg instanceof Tag)) {\n        return false\n      }\n\n      if (types.length) {\n        return types.reduce((isType, type) => {\n          return isType || type === arg.type\n        }, false)\n      }\n\n      return true\n    },\n    isCompute(arg) {\n      return arg instanceof Compute\n    },\n    value(arg, overrideProps) {\n      if (arg instanceof Tag || arg instanceof Compute) {\n        return arg.getValue(\n          overrideProps\n            ? Object.assign({}, getters, { props: overrideProps })\n            : getters\n        )\n      }\n\n      return arg\n    },\n    path(arg) {\n      if (arg instanceof Tag) {\n        return arg.getPath(getters)\n      }\n\n      throwError('You are extracting a path from an argument that is not a Tag')\n    },\n  }\n}\n\nexport const noop = () => {}\n\n/*\n  When testing and running on the server there is no need to\n  initialize all of Cerebral. So by not passing a controller\n  to this Container it will create a dummy version which inserts\n  state and mocks any signals when connecting the component.\n*/\nexport function createDummyController(state = {}, signals = {}) {\n  const getState = path => {\n    return ensurePath(path).reduce((currentState, pathKey) => {\n      return currentState ? currentState[pathKey] : undefined\n    }, state)\n  }\n  return {\n    options: {},\n    on() {},\n    getState,\n    model: {\n      get: getState,\n    },\n    getSignal(signal) {\n      return signals[signal] || (() => {})\n    },\n    componentDependencyStore: {\n      addEntity: noop,\n    },\n  }\n}\n\nexport function getStateTreeProp(props = {}) {\n  return Object.keys(props).reduce((prop, key) => {\n    if (prop || (isComplexObject(props[key]) && Object.isFrozen(props[key]))) {\n      return key\n    }\n\n    return prop\n  }, null)\n}\n"]}