{"version":3,"sources":["../../src/operators/when.js"],"names":["HELP_URL","whenFactory","args","whenFunc","length","valueTemplates","slice","when","state","path","resolve","Error","true","false","values","map","value","isTrue","Boolean","displayName","filter","arg","String","join"],"mappings":";;;;;;AAAA;;;;;;;;AAEA,IAAMA,WAAW,oDAAjB;;AAEA,SAASC,WAAT,GAA8B;AAAA,oCAANC,IAAM;AAANA,QAAM;AAAA;;AAC5B,MAAMC,WAAWD,KAAKE,MAAL,GAAc,CAAd,GAAkBF,KAAKA,KAAKE,MAAL,GAAc,CAAnB,CAAlB,GAA0C,IAA3D;AACA,MAAMC,iBAAiBH,KAAKE,MAAL,GAAc,CAAd,GAAkBF,KAAKI,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAlB,GAAsCJ,IAA7D;AACA,WAASK,IAAT,OAAwC;AAAA,QAAxBC,KAAwB,QAAxBA,KAAwB;AAAA,QAAjBC,IAAiB,QAAjBA,IAAiB;AAAA,QAAXC,OAAW,QAAXA,OAAW;;AACtC,QAAIL,eAAeD,MAAf,GAAwB,CAAxB,IAA6B,EAAEC,eAAe,CAAf,0BAAF,CAAjC,EAAsE;AACpE,YAAM,IAAIM,KAAJ,qFAC8EX,QAD9E,CAAN;AAGD;AACD,QAAI,CAACS,IAAD,IAAS,CAACA,KAAKG,IAAf,IAAuB,CAACH,KAAKI,KAAjC,EAAwC;AACtC,YAAM,IAAIF,KAAJ,CACJ,uHADI,CAAN;AAGD;AACD,QAAMG,SAAST,eAAeU,GAAf,CAAmB;AAAA,aAASL,QAAQM,KAAR,CAAcA,KAAd,CAAT;AAAA,KAAnB,CAAf;AACA,QAAMC,SAASC,QAAQf,WAAWA,6CAAYW,MAAZ,EAAX,GAAiCA,OAAO,CAAP,CAAzC,CAAf;;AAEA,WAAOG,SAASR,KAAKG,IAAL,EAAT,GAAuBH,KAAKI,KAAL,EAA9B;AACD;;AAEDN,OAAKY,WAAL,sBAAoCjB,KACjCkB,MADiC,CAC1B,eAAO;AACb,WAAO,OAAOC,GAAP,KAAe,UAAtB;AACD,GAHiC,EAIjCN,GAJiC,CAI7B,eAAO;AACV,WAAOO,OAAOD,GAAP,CAAP;AACD,GANiC,EAOjCE,IAPiC,CAO5B,GAP4B,CAApC;;AASA,SAAOhB,IAAP;AACD;;kBAEcN,W","file":"when.js","sourcesContent":["import Tag from '../tags/Tag'\n\nconst HELP_URL = 'http://cerebraljs.com/docs/api/operators.html#when'\n\nfunction whenFactory(...args) {\n  const whenFunc = args.length > 1 ? args[args.length - 1] : null\n  const valueTemplates = args.length > 1 ? args.slice(0, -1) : args\n  function when({ state, path, resolve }) {\n    if (valueTemplates.length > 0 && !(valueTemplates[0] instanceof Tag)) {\n      throw new Error(\n        `Cerebral operator.when: You have to use the STATE or PROPS TAG as values, see: ${HELP_URL}`\n      )\n    }\n    if (!path || !path.true || !path.false) {\n      throw new Error(\n        'Cerebral operator.when: true/false paths need to be provided, see: http://cerebraljs.com/docs/api/operators.html#when'\n      )\n    }\n    const values = valueTemplates.map(value => resolve.value(value))\n    const isTrue = Boolean(whenFunc ? whenFunc(...values) : values[0])\n\n    return isTrue ? path.true() : path.false()\n  }\n\n  when.displayName = `operator.when(${args\n    .filter(arg => {\n      return typeof arg !== 'function'\n    })\n    .map(arg => {\n      return String(arg)\n    })\n    .join(',')})`\n\n  return when\n}\n\nexport default whenFactory\n"]}